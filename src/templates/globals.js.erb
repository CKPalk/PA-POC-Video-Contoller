
const VIDEO_SENTIMENT = {
  NONE: '<%= @VIDEO_SENTIMENT_NONE %>',
  LIKE: '<%= @VIDEO_SENTIMENT_LIKE %>',
  SNOOZE: '<%= @VIDEO_SENTIMENT_SNOOZE %>'
}

function addClickEvent(element, fn) {
  if (!element || !fn) return
  element.addEventListener('click', fn)
}

function noop() {}

function ajax_get(url, params, callback) {
  var xhttp = new XMLHttpRequest()
  xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200)
         callback(xhttp.responseText)
  }
  xhttp.open('GET', url, true)
  xhttp.send()
}

function log() { console.log('PA-VID:', ...arguments) }

function generateGUID() {
    var S4 = function() {
       return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
    };
    return (S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4());
}

function getStorageRecord(key) {
  return new Promise(resolve => {
    chrome.storage.local.get(key, ({ [key]: res }) => { resolve(res) })
  })
}

function saveStorageRecord(key, val) {
  chrome.storage.local.set({ [key]: val })
}
